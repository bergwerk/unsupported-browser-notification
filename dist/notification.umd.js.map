{"version":3,"file":"notification.umd.js","sources":["../src/UnsupportedBrowserNotification.js","../src/util/index.js"],"sourcesContent":["import { setCookie, getCookie, isInArray } from './util';\n\nclass UnsupportedBrowserNotification {\n    constructor(options) {\n        this.defaultTranslations = {\n            de: {\n                title: 'Leider ist Ihr Browser veraltet.',\n                description: 'Wir empfehlen Ihnen eine neuere Version oder einen alternativen Browser zu verwenden, um die volle FunktionalitÃ¤t unserer Seite zu erhalten.',\n            },\n            en: {\n                title: 'Unfortunately, your browser is out of date.',\n                description: 'We recommend that you use a newer version or an alternative browser to get the full functionality of our site.'\n            }\n        }\n\n        this.defaultOptions = {\n            title: '',\n            description: '',\n            injectCss: true,\n            injectHtml: true,\n            cssPrefix: 'ubn',\n            lang: 'auto',\n            translations: {},\n            backdropOpacity: '0.5',\n            backdropColor: '#000000',\n            closeColor: '#ffffff',\n            cookie: 'ubn-hidden',\n            showNotification: ['ie', 'edge']\n        }\n\n        this.options = {...this.defaultOptions, ...options};\n\n        this.cssPrefix = this.options.cssPrefix;\n    }\n\n    init() {\n        if (this.defaultOptions.injectCss) this.injectCSS();\n        if (this.defaultOptions.injectHtml) this.injectHTML();\n\n        this.listeners();\n        this.show();\n    }\n\n    detectLanguage() {\n        const htmlTag = document.getElementsByTagName('html')[0];\n        const lang = htmlTag.getAttribute('lang') || htmlTag.getAttribute('xml:lang');\n\n        let detectedLanguage = this.options.lang;\n\n        if (this.options.lang === 'auto' && lang) {\n            // We are only interested in the language, so the country can be removed if string is based on RFC 1766 / 3066\n            detectedLanguage = lang.substring(0, 2);\n        } else if (this.options.lang === 'auto') {\n            console.warn('The language could not be automatically detected. Please use the option \\'lang\\' to set it manually. The fallback goes automatically to \\'en\\' for english.')\n\n            // Fallback\n            detectedLanguage = 'en';\n        }\n\n        return detectedLanguage;\n    }\n\n    /**\n     * Detect current browser\n     * @see https://stackoverflow.com/a/56361977/7104555\n     * @returns {string|{description: string, title: string}}\n     */\n    detectBrowser() {\n        const agent = window.navigator.userAgent.toLowerCase();\n\n        switch (true) {\n            case agent.indexOf('edge') > -1:\n                return 'edge';\n            case agent.indexOf('edg/') > -1:\n                return 'edge-chromium';\n            case agent.indexOf('opr') > -1 && !!window.opr:\n                return 'opera';\n            case agent.indexOf('chrome') > -1 && !!window.chrome:\n                return 'chrome';\n            case agent.indexOf('trident') > -1:\n                return 'ie';\n            case agent.indexOf('firefox') > -1:\n                return 'firefox';\n            case agent.indexOf('safari') > -1:\n                return 'safari';\n            default:\n                return 'other';\n        }\n    }\n\n    isUnsupported() {\n        return isInArray(this.detectBrowser(), this.options.showNotification);\n    }\n\n    text() {\n        const language = this.detectLanguage();\n        const translations = {...this.defaultTranslations, ...this.options.translations};\n\n        let title = '';\n        let description = '';\n\n        const translation = translations[language];\n\n        if (this.options.title && this.options.title.length > 0) {\n            title = this.options.title;\n        }\n\n        if (this.options.description && this.options.title.description > 0) {\n            description = this.options.description;\n        }\n\n        if (!title && !title.length > 0 && translation.title) {\n            title = translation.title;\n        }\n\n        if (!description && !description.length > 0 && translation.description) {\n            description = translation.description;\n        }\n\n        return {\n            title,\n            description\n        }\n    }\n\n    injectCSS() {\n        const {cssPrefix} = this.options;\n\n        const css = `\n            .${this.cssPrefix} {\n                position: fixed;\n                z-index: 100000;\n                top: 0px;\n                left: 0px;\n                right: 0px;\n                bottom: 0px;\n            }\n            \n            .${this.cssPrefix}--is-hidden {\n                display: none !important;\n            }\n            \n            .${this.cssPrefix}__backdrop {\n                position: fixed;\n                top: 0px;\n                left: 0px;\n                right: 0px;\n                bottom: 0px;\n                background-color: ${this.options.backdropColor};\n                opacity: ${this.options.backdropOpacity};\n            }\n            \n            .${this.cssPrefix}__modal {\n                position: absolute;\n                z-index: 5;\n                -webkit-transform: translateX(-50%) translateY(-50%);\n                    -ms-transform: translateX(-50%) translateY(-50%);\n                        transform: translateX(-50%) translateY(-50%);\n                top: 50%;\n                left: 50%;\n                max-width: 700px;\n                width: 100%;\n                padding: 0 45px;\n            }\n            \n            .${this.cssPrefix}__dialog {\n                background-color: #ffffff;\n                padding: 30px;\n            }\n            \n            .${this.cssPrefix}__header {\n                margin-bottom: 15px;\n            }\n            \n            .${this.cssPrefix}__title {\n                font-size: 24px;\n                font-weight: bold;\n                margin: 0;\n            }\n            \n            .${this.cssPrefix}__description {\n                margin: 0;\n            }\n            \n            .${this.cssPrefix}__close-button {\n                position: absolute;\n                top: 30px;\n                right: 30px;\n                width: 24px;\n                height: 24px;\n                background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23${this.options.closeColor.replace('#', '')}' d='M27.6,24L46.3,5.3c1-1,1-2.6,0-3.6c-1-1-2.6-1-3.6,0L24,20.4L5.3,1.7c-1-1-2.6-1-3.6,0s-1,2.6,0,3.6L20.4,24 L1.7,42.7c-1,1-1,2.6,0,3.6C2.3,46.8,2.9,47,3.5,47s1.3-0.3,1.8-0.7L24,27.6l18.7,18.7c0.5,0.5,1.1,0.7,1.8,0.7s1.3-0.3,1.8-0.7 c1-1,1-2.6,0-3.6L27.6,24z'/%3E%3C/svg%3E%0A\");\n                cursor: pointer;\n            }        \n        `;\n\n        const styleElement = document.createElement('style');\n        styleElement.textContent = css;\n\n        document.body.appendChild(styleElement);\n    }\n\n    injectHTML() {\n        const {cssPrefix} = this.options;\n\n        const html = `\n            <div class=\"${cssPrefix} ${cssPrefix}--is-hidden\">\n                <div class=\"${cssPrefix}__modal\">\n                    <div class=\"${cssPrefix}__dialog\">\n                        <div class=\"${cssPrefix}__header\">\n                            <h5 class=\"${cssPrefix}__title\">${this.text().title}</h5>\n                        </div>\n                        <div class=\"${cssPrefix}__body\">\n                            <p class=\"${cssPrefix}__description\">${this.text().description}</p>\n                        </div>\n                    </div>\n                </div>\n            \n                <div class=\"${cssPrefix}__backdrop\"></div>\n                <div class=\"${cssPrefix}__close-button\" type=\"button\"></div>\n            </div>\n        `;\n\n        document.body.insertAdjacentHTML('beforeend', html);\n    }\n\n    listeners() {\n        const closeButton = document.querySelector(`.${this.cssPrefix}__close-button`);\n\n        closeButton.addEventListener('click', () => {\n            this.hide();\n        });\n    }\n\n    hide() {\n        const notification = document.querySelector(`.${this.cssPrefix}`);\n\n        notification.classList.add(`${this.cssPrefix}--is-hidden`);\n        setCookie(this.options.cookie, '1', 1);\n    }\n\n    show() {\n        const cookie = getCookie(this.options.cookie);\n\n        const notification = document.querySelector(`.${this.cssPrefix}`);\n\n        if (this.isUnsupported() && cookie !== '1') {\n            notification.classList.remove(`${this.cssPrefix}--is-hidden`);\n        }\n    }\n}\n\nexport default UnsupportedBrowserNotification;\n","const getCookie = (name) => {\n    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n    return v ? v[2] : null;\n}\n\nconst setCookie = (name, value, days) => {\n    const d = new Date;\n    d.setTime(d.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = `${name}=${value};path=/;expires=${d.toGMTString()}`;\n}\n\nconst isInArray = (value, array) => {\n    return array.indexOf(value) > -1;\n}\n\nexport {\n    getCookie,\n    setCookie,\n    isInArray\n}"],"names":["constructor","options","defaultTranslations","de","title","description","en","defaultOptions","injectCss","injectHtml","cssPrefix","lang","translations","backdropOpacity","backdropColor","closeColor","cookie","showNotification","this","init","injectCSS","injectHTML","listeners","show","detectLanguage","htmlTag","document","getElementsByTagName","getAttribute","detectedLanguage","substring","console","warn","detectBrowser","agent","window","navigator","userAgent","toLowerCase","indexOf","opr","chrome","isUnsupported","value","text","language","translation","length","css","replace","styleElement","createElement","textContent","body","appendChild","html","insertAdjacentHTML","querySelector","addEventListener","hide","classList","add","name","days","d","Date","setTime","getTime","toGMTString","setCookie","v","match","getCookie","notification","remove"],"mappings":"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"}