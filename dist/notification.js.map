{"version":3,"file":"notification.js","sources":["../src/util/index.js","../src/UnsupportedBrowserNotification.js","../src/index.js"],"sourcesContent":["const getCookie = (name) => {\n    const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n    return v ? v[2] : null;\n}\n\nconst setCookie = (name, value, days) => {\n    const d = new Date;\n    d.setTime(d.getTime() + 24 * 60 * 60 * 1000 * days);\n    document.cookie = `${name}=${value};path=/;expires=${d.toGMTString()}`;\n}\n\nconst isInArray = (value, array) => {\n    return array.indexOf(value) > -1;\n}\n\nexport {\n    getCookie,\n    setCookie,\n    isInArray\n}","import { setCookie, getCookie, isInArray } from './util';\n\nclass UnsupportedBrowserNotification {\n    constructor(options) {\n        this.defaultTranslations = {\n            de: {\n                title: 'Leider ist Ihr Browser veraltet.',\n                description: 'Wir empfehlen Ihnen eine neuere Version oder einen alternativen Browser zu verwenden, um die volle FunktionalitÃ¤t unserer Seite zu erhalten.',\n            },\n            en: {\n                title: 'Unfortunately, your browser is out of date.',\n                description: 'We recommend that you use a newer version or an alternative browser to get the full functionality of our site.'\n            }\n        }\n\n        this.defaultOptions = {\n            title: '',\n            description: '',\n            injectCss: true,\n            injectHtml: true,\n            cssPrefix: 'ubn',\n            lang: 'auto',\n            translations: {},\n            backdropOpacity: '0.5',\n            backdropColor: '#000000',\n            closeColor: '#ffffff',\n            cookie: 'ubn-hidden',\n            showNotification: ['ie', 'edge']\n        }\n\n        this.options = {...this.defaultOptions, ...options};\n\n        this.cssPrefix = this.options.cssPrefix;\n    }\n\n    init() {\n        if (this.defaultOptions.injectCss) this.injectCSS();\n        if (this.defaultOptions.injectHtml) this.injectHTML();\n\n        this.listeners();\n        this.show();\n    }\n\n    detectLanguage() {\n        const htmlTag = document.getElementsByTagName('html')[0];\n        const lang = htmlTag.getAttribute('lang') || htmlTag.getAttribute('xml:lang');\n\n        if (this.options.lang === 'auto' && lang) {\n            return lang;\n        } else if (this.options.lang === 'auto') {\n            console.warn('The language could not be automatically detected. Please use the option \\'lang\\' to set it manually. The fallback goes automatically to \\'en\\' for english.')\n\n            return 'en';\n        }\n\n        return this.options.lang;\n    }\n\n    /**\n     * Detect current browser\n     * @see https://stackoverflow.com/a/56361977/7104555\n     * @returns {string|{description: string, title: string}}\n     */\n    detectBrowser() {\n        const agent = window.navigator.userAgent.toLowerCase();\n\n        switch (true) {\n            case agent.indexOf('edge') > -1:\n                return 'edge';\n            case agent.indexOf('edg/') > -1:\n                return 'edge-chromium';\n            case agent.indexOf('opr') > -1 && !!window.opr:\n                return 'opera';\n            case agent.indexOf('chrome') > -1 && !!window.chrome:\n                return 'chrome';\n            case agent.indexOf('trident') > -1:\n                return 'ie';\n            case agent.indexOf('firefox') > -1:\n                return 'firefox';\n            case agent.indexOf('safari') > -1:\n                return 'safari';\n            default:\n                return 'other';\n        }\n    }\n\n    isUnsupported() {\n        return isInArray(this.detectBrowser(), this.options.showNotification);\n    }\n\n    text() {\n        const language = this.detectLanguage();\n        const translations = {...this.defaultTranslations, ...this.options.translations};\n\n        let title = '';\n        let description = '';\n\n        const translation = translations[language];\n\n        if (this.options.title && this.options.title.length > 0) {\n            title = this.options.title;\n        }\n\n        if (this.options.description && this.options.title.description > 0) {\n            description = this.options.description;\n        }\n\n        if (!title && !title.length > 0 && translation.title) {\n            title = translation.title;\n        }\n\n        if (!description && !description.length > 0 && translation.description) {\n            description = translation.description;\n        }\n\n        return {\n            title,\n            description\n        }\n    }\n\n    injectCSS() {\n        const {cssPrefix} = this.options;\n\n        const css = `\n            .${this.cssPrefix} {\n                position: fixed;\n                z-index: 100000;\n                top: 0px;\n                left: 0px;\n                right: 0px;\n                bottom: 0px;\n            }\n            \n            .${this.cssPrefix}--is-hidden {\n                display: none !important;\n            }\n            \n            .${this.cssPrefix}__backdrop {\n                position: fixed;\n                top: 0px;\n                left: 0px;\n                right: 0px;\n                bottom: 0px;\n                background-color: ${this.options.backdropColor};\n                opacity: ${this.options.backdropOpacity};\n            }\n            \n            .${this.cssPrefix}__modal {\n                position: absolute;\n                z-index: 5;\n                -webkit-transform: translateX(-50%) translateY(-50%);\n                    -ms-transform: translateX(-50%) translateY(-50%);\n                        transform: translateX(-50%) translateY(-50%);\n                top: 50%;\n                left: 50%;\n                max-width: 700px;\n                width: 100%;\n                padding: 0 45px;\n            }\n            \n            .${this.cssPrefix}__dialog {\n                background-color: #ffffff;\n                padding: 30px;\n            }\n            \n            .${this.cssPrefix}__header {\n                margin-bottom: 15px;\n            }\n            \n            .${this.cssPrefix}__title {\n                font-size: 24px;\n                font-weight: bold;\n                margin: 0;\n            }\n            \n            .${this.cssPrefix}__description {\n                margin: 0;\n            }\n            \n            .${this.cssPrefix}__close-button {\n                position: absolute;\n                top: 30px;\n                right: 30px;\n                width: 24px;\n                height: 24px;\n                background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23${this.options.closeColor.replace('#', '')}' d='M27.6,24L46.3,5.3c1-1,1-2.6,0-3.6c-1-1-2.6-1-3.6,0L24,20.4L5.3,1.7c-1-1-2.6-1-3.6,0s-1,2.6,0,3.6L20.4,24 L1.7,42.7c-1,1-1,2.6,0,3.6C2.3,46.8,2.9,47,3.5,47s1.3-0.3,1.8-0.7L24,27.6l18.7,18.7c0.5,0.5,1.1,0.7,1.8,0.7s1.3-0.3,1.8-0.7 c1-1,1-2.6,0-3.6L27.6,24z'/%3E%3C/svg%3E%0A\");\n                cursor: pointer;\n            }        \n        `;\n\n        const styleElement = document.createElement('style');\n        styleElement.textContent = css;\n\n        document.body.appendChild(styleElement);\n    }\n\n    injectHTML() {\n        const {cssPrefix} = this.options;\n\n        const html = `\n            <div class=\"${cssPrefix} ${cssPrefix}--is-hidden\">\n                <div class=\"${cssPrefix}__modal\">\n                    <div class=\"${cssPrefix}__dialog\">\n                        <div class=\"${cssPrefix}__header\">\n                            <h5 class=\"${cssPrefix}__title\">${this.text().title}</h5>\n                        </div>\n                        <div class=\"${cssPrefix}__body\">\n                            <p class=\"${cssPrefix}__description\">${this.text().description}</p>\n                        </div>\n                    </div>\n                </div>\n            \n                <div class=\"${cssPrefix}__backdrop\"></div>\n                <div class=\"${cssPrefix}__close-button\" type=\"button\"></div>\n            </div>\n        `;\n\n        document.body.insertAdjacentHTML('beforeend', html);\n    }\n\n    listeners() {\n        const closeButton = document.querySelector(`.${this.cssPrefix}__close-button`);\n\n        closeButton.addEventListener('click', () => {\n            this.hide();\n        });\n    }\n\n    hide() {\n        const notification = document.querySelector(`.${this.cssPrefix}`);\n\n        notification.classList.add(`${this.cssPrefix}--is-hidden`);\n        setCookie(this.options.cookie, '1', 1);\n    }\n\n    show() {\n        const cookie = getCookie(this.options.cookie);\n\n        const notification = document.querySelector(`.${this.cssPrefix}`);\n\n        if (this.isUnsupported() && cookie !== '1') {\n            notification.classList.remove(`${this.cssPrefix}--is-hidden`);\n        }\n    }\n}\n\nexport default UnsupportedBrowserNotification;","import UnsupportedBrowserNotification from './UnsupportedBrowserNotification';\n\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n    let options = {};\n\n    if (window.ubnOptions) options = window.ubnOptions;\n\n    const notification = new UnsupportedBrowserNotification(options);\n\n    notification.init();\n});"],"names":["UnsupportedBrowserNotification","options","defaultTranslations","de","title","description","en","defaultOptions","injectCss","injectHtml","cssPrefix","lang","translations","backdropOpacity","backdropColor","closeColor","cookie","showNotification","this","injectCSS","injectHTML","listeners","show","htmlTag","document","getElementsByTagName","getAttribute","console","warn","agent","window","navigator","userAgent","toLowerCase","indexOf","opr","chrome","value","detectBrowser","language","detectLanguage","translation","length","css","replace","styleElement","createElement","textContent","body","appendChild","html","text","insertAdjacentHTML","querySelector","addEventListener","_this","hide","name","days","d","classList","add","Date","setTime","getTime","toGMTString","v","match","notification","isUnsupported","remove","event","ubnOptions","init"],"mappings":"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"}